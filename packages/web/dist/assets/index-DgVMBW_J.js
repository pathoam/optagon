import{o as Ut}from"./clerk-B6UnHhKw.js";import{r as Ft,a as Mt,b as jt}from"./xterm-DtuKHb5T.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const L={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Ze(this.context.count)},getNextContextId(){return Ze(this.context.count++)}};function Ze(e){const t=String(e),n=t.length-1;return L.context.id+(n?String.fromCharCode(96+n):"")+t}function ue(e){L.context=e}const Dt=!1,Vt=(e,t)=>e===t,Se=Symbol("solid-proxy"),gt=typeof Proxy=="function",Bt=Symbol("solid-track"),Ce={equals:Vt};let pt=vt;const H=1,de=2,mt={owned:null,cleanups:null,context:null,owner:null};var P=null;let x=null,Wt=null,F=null,z=null,W=null,Ee=0;function Y(e,t){const n=F,s=P,r=e.length===0,i=t===void 0?s:t,o=r?mt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?e:()=>e(()=>q(()=>Q(o)));P=o,F=null;try{return G(l,!0)}finally{F=n,P=s}}function R(e,t){t=t?Object.assign({},Ce,t):Ce;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=r=>(typeof r=="function"&&(x&&x.running&&x.sources.has(n)?r=r(n.tValue):r=r(n.value)),yt(n,r));return[xt.bind(n),s]}function M(e,t,n){const s=ze(e,t,!1,H);we(s)}function zt(e,t,n){pt=Xt;const s=ze(e,t,!1,H),r=fe&&be(fe);r&&(s.suspense=r),s.user=!0,W?W.push(s):we(s)}function j(e,t,n){n=n?Object.assign({},Ce,n):Ce;const s=ze(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,we(s),xt.bind(s)}function Kt(e){return G(e,!1)}function q(e){if(F===null)return e();const t=F;F=null;try{return e()}finally{F=t}}function Ve(e,t,n){const s=Array.isArray(e);let r,i=n&&n.defer;return o=>{let l;if(s){l=Array(e.length);for(let u=0;u<e.length;u++)l[u]=e[u]()}else l=e();if(i)return i=!1,o;const a=q(()=>t(l,r,o));return r=l,a}}function Be(e){zt(()=>q(e))}function me(e){return P===null||(P.cleanups===null?P.cleanups=[e]:P.cleanups.push(e)),e}function We(){return P}function bt(e,t){const n=P,s=F;P=e,F=null;try{return G(t,!0)}catch(r){Ke(r)}finally{P=n,F=s}}function qt(e){if(x&&x.running)return e(),x.done;const t=F,n=P;return Promise.resolve().then(()=>{F=t,P=n;let s;return fe&&(s=x||(x={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),s.done||(s.done=new Promise(r=>s.resolve=r)),s.running=!0),G(e,!1),F=P=null,s?s.done:void 0})}const[Cs,et]=R(!1);function Ht(e){W.push.apply(W,e),e.length=0}function Pe(e,t){const n=Symbol("context");return{id:n,Provider:Qt(n),defaultValue:e}}function be(e){let t;return P&&P.context&&(t=P.context[e.id])!==void 0?t:e.defaultValue}function wt(e){const t=j(e),n=j(()=>Ne(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let fe;function Gt(){return fe||(fe=Pe())}function xt(){const e=x&&x.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===H)we(this);else{const t=z;z=null,G(()=>Ae(this),!1),z=t}if(F){const t=this.observers?this.observers.length:0;F.sources?(F.sources.push(this),F.sourceSlots.push(t)):(F.sources=[this],F.sourceSlots=[t]),this.observers?(this.observers.push(F),this.observerSlots.push(F.sources.length-1)):(this.observers=[F],this.observerSlots=[F.sources.length-1])}return e&&x.sources.has(this)?this.tValue:this.value}function yt(e,t,n){let s=x&&x.running&&x.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(s,t)){if(x){const r=x.running;(r||!n&&x.sources.has(e))&&(x.sources.add(e),e.tValue=t),r||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&G(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],o=x&&x.running;o&&x.disposed.has(i)||((o?!i.tState:!i.state)&&(i.pure?z.push(i):W.push(i),i.observers&&$t(i)),o?i.tState=H:i.state=H)}if(z.length>1e6)throw z=[],new Error},!1)}return t}function we(e){if(!e.fn)return;Q(e);const t=Ee;tt(e,x&&x.running&&x.sources.has(e)?e.tValue:e.value,t),x&&!x.running&&x.sources.has(e)&&queueMicrotask(()=>{G(()=>{x&&(x.running=!0),F=P=e,tt(e,e.tValue,t),F=P=null},!1)})}function tt(e,t,n){let s;const r=P,i=F;F=P=e;try{s=e.fn(t)}catch(o){return e.pure&&(x&&x.running?(e.tState=H,e.tOwned&&e.tOwned.forEach(Q),e.tOwned=void 0):(e.state=H,e.owned&&e.owned.forEach(Q),e.owned=null)),e.updatedAt=n+1,Ke(o)}finally{F=i,P=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?yt(e,s,!0):x&&x.running&&e.pure?(x.sources.add(e),e.tValue=s):e.value=s,e.updatedAt=n)}function ze(e,t,n,s=H,r){const i={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:P,context:P?P.context:null,pure:n};return x&&x.running&&(i.state=0,i.tState=s),P===null||P!==mt&&(x&&x.running&&P.pure?P.tOwned?P.tOwned.push(i):P.tOwned=[i]:P.owned?P.owned.push(i):P.owned=[i]),i}function ke(e){const t=x&&x.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===de)return Ae(e);if(e.suspense&&q(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ee);){if(t&&x.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let s=n.length-1;s>=0;s--){if(e=n[s],t){let r=e,i=n[s+1];for(;(r=r.owner)&&r!==i;)if(x.disposed.has(r))return}if((t?e.tState:e.state)===H)we(e);else if((t?e.tState:e.state)===de){const r=z;z=null,G(()=>Ae(e,n[0]),!1),z=r}}}function G(e,t){if(z)return e();let n=!1;t||(z=[]),W?n=!0:W=[],Ee++;try{const s=e();return Jt(n),s}catch(s){n||(W=null),z=null,Ke(s)}}function Jt(e){if(z&&(vt(z),z=null),e)return;let t;if(x){if(!x.promises.size&&!x.queue.size){const s=x.sources,r=x.disposed;W.push.apply(W,x.effects),t=x.resolve;for(const i of W)"tState"in i&&(i.state=i.tState),delete i.tState;x=null,G(()=>{for(const i of r)Q(i);for(const i of s){if(i.value=i.tValue,i.owned)for(let o=0,l=i.owned.length;o<l;o++)Q(i.owned[o]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}et(!1)},!1)}else if(x.running){x.running=!1,x.effects.push.apply(x.effects,W),W=null,et(!0);return}}const n=W;W=null,n.length&&G(()=>pt(n),!1),t&&t()}function vt(e){for(let t=0;t<e.length;t++)ke(e[t])}function Xt(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:ke(s)}if(L.context){if(L.count){L.effects||(L.effects=[]),L.effects.push(...e.slice(0,n));return}ue()}for(L.effects&&(L.done||!L.count)&&(e=[...L.effects,...e],n+=L.effects.length,delete L.effects),t=0;t<n;t++)ke(e[t])}function Ae(e,t){const n=x&&x.running;n?e.tState=0:e.state=0;for(let s=0;s<e.sources.length;s+=1){const r=e.sources[s];if(r.sources){const i=n?r.tState:r.state;i===H?r!==t&&(!r.updatedAt||r.updatedAt<Ee)&&ke(r):i===de&&Ae(r,t)}}}function $t(e){const t=x&&x.running;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(t?!s.tState:!s.state)&&(t?s.tState=de:s.state=de,s.pure?z.push(s):W.push(s),s.observers&&$t(s))}}function Q(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Q(e.tOwned[t]);delete e.tOwned}if(x&&x.running&&e.pure)_t(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)Q(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}x&&x.running?e.tState=0:e.state=0}function _t(e,t){if(t||(e.tState=0,x.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)_t(e.owned[n])}function Yt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ke(e,t=P){throw Yt(e)}function Ne(e){if(typeof e=="function"&&!e.length)return Ne(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=Ne(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function Qt(e,t){return function(s){let r;return M(()=>r=q(()=>(P.context={...P.context,[e]:s.value},wt(()=>s.children))),void 0),r}}const Zt=Symbol("fallback");function nt(e){for(let t=0;t<e.length;t++)e[t]()}function en(e,t,n={}){let s=[],r=[],i=[],o=0,l=t.length>1?[]:null;return me(()=>nt(i)),()=>{let a=e()||[],u=a.length,c,d;return a[Bt],q(()=>{let h,$,g,v,k,w,O,_,S;if(u===0)o!==0&&(nt(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[Zt],r[0]=Y(b=>(i[0]=b,n.fallback())),o=1);else if(o===0){for(r=new Array(u),d=0;d<u;d++)s[d]=a[d],r[d]=Y(f);o=u}else{for(g=new Array(u),v=new Array(u),l&&(k=new Array(u)),w=0,O=Math.min(o,u);w<O&&s[w]===a[w];w++);for(O=o-1,_=u-1;O>=w&&_>=w&&s[O]===a[_];O--,_--)g[_]=r[O],v[_]=i[O],l&&(k[_]=l[O]);for(h=new Map,$=new Array(_+1),d=_;d>=w;d--)S=a[d],c=h.get(S),$[d]=c===void 0?-1:c,h.set(S,d);for(c=w;c<=O;c++)S=s[c],d=h.get(S),d!==void 0&&d!==-1?(g[d]=r[c],v[d]=i[c],l&&(k[d]=l[c]),d=$[d],h.set(S,d)):i[c]();for(d=w;d<u;d++)d in g?(r[d]=g[d],i[d]=v[d],l&&(l[d]=k[d],l[d](d))):r[d]=Y(f);r=r.slice(0,o=u),s=a.slice(0)}return r});function f(h){if(i[d]=h,l){const[$,g]=R(d);return l[d]=g,t(a[d],$)}return t(a[d])}}}function p(e,t){return q(()=>e(t||{}))}function $e(){return!0}const Ue={get(e,t,n){return t===Se?n:e.get(t)},has(e,t){return t===Se?!0:e.has(t)},set:$e,deleteProperty:$e,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:$e,deleteProperty:$e}},ownKeys(e){return e.keys()}};function Te(e){return(e=typeof e=="function"?e():e)?e:{}}function tn(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function rt(...e){let t=!1;for(let o=0;o<e.length;o++){const l=e[o];t=t||!!l&&Se in l,e[o]=typeof l=="function"?(t=!0,j(l)):l}if(gt&&t)return new Proxy({get(o){for(let l=e.length-1;l>=0;l--){const a=Te(e[l])[o];if(a!==void 0)return a}},has(o){for(let l=e.length-1;l>=0;l--)if(o in Te(e[l]))return!0;return!1},keys(){const o=[];for(let l=0;l<e.length;l++)o.push(...Object.keys(Te(e[l])));return[...new Set(o)]}},Ue);const n={},s=Object.create(null);for(let o=e.length-1;o>=0;o--){const l=e[o];if(!l)continue;const a=Object.getOwnPropertyNames(l);for(let u=a.length-1;u>=0;u--){const c=a[u];if(c==="__proto__"||c==="constructor")continue;const d=Object.getOwnPropertyDescriptor(l,c);if(!s[c])s[c]=d.get?{enumerable:!0,configurable:!0,get:tn.bind(n[c]=[d.get.bind(l)])}:d.value!==void 0?d:void 0;else{const f=n[c];f&&(d.get?f.push(d.get.bind(l)):d.value!==void 0&&f.push(()=>d.value))}}}const r={},i=Object.keys(s);for(let o=i.length-1;o>=0;o--){const l=i[o],a=s[l];a&&a.get?Object.defineProperty(r,l,a):r[l]=a?a.value:void 0}return r}function nn(e,...t){const n=t.length;if(gt&&Se in e){const r=n>1?t.flat():t[0],i=t.map(o=>new Proxy({get(l){return o.includes(l)?e[l]:void 0},has(l){return o.includes(l)&&l in e},keys(){return o.filter(l=>l in e)}},Ue));return i.push(new Proxy({get(o){return r.includes(o)?void 0:e[o]},has(o){return r.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!r.includes(o))}},Ue)),i}const s=[];for(let r=0;r<=n;r++)s[r]={};for(const r of Object.getOwnPropertyNames(e)){let i=n;for(let a=0;a<t.length;a++)if(t[a].includes(r)){i=a;break}const o=Object.getOwnPropertyDescriptor(e,r);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?s[i][r]=o.value:Object.defineProperty(s[i],r,o)}return s}const rn=e=>`Stale read from <${e}>.`;function St(e){const t="fallback"in e&&{fallback:()=>e.fallback};return j(en(()=>e.each,e.children,t||void 0))}function I(e){const t=e.keyed,n=j(()=>e.when,void 0,void 0),s=t?n:j(n,void 0,{equals:(r,i)=>!r==!i});return j(()=>{const r=s();if(r){const i=e.children;return typeof i=="function"&&i.length>0?q(()=>i(t?r:()=>{if(!q(s))throw rn("Show");return n()})):i}return e.fallback},void 0,void 0)}const sn=Pe();function on(e){let t=0,n,s,r,i,o;const[l,a]=R(!1),u=Gt(),c={increment:()=>{++t===1&&a(!0)},decrement:()=>{--t===0&&a(!1)},inFallback:l,effects:[],resolved:!1},d=We();if(L.context&&L.load){const $=L.getContextId();let g=L.load($);if(g&&(typeof g!="object"||g.s!==1?r=g:L.gather($)),r&&r!=="$$f"){const[v,k]=R(void 0,{equals:!1});i=v,r.then(()=>{if(L.done)return k();L.gather($),ue(s),k(),ue()},w=>{o=w,k()})}}const f=be(sn);f&&(n=f.register(c.inFallback));let h;return me(()=>h&&h()),p(u.Provider,{value:c,get children(){return j(()=>{if(o)throw o;if(s=L.context,i)return i(),i=void 0;s&&r==="$$f"&&ue();const $=j(()=>e.children);return j(g=>{const v=c.inFallback(),{showContent:k=!0,showFallback:w=!0}=n?n():{};if((!v||r&&r!=="$$f")&&k)return c.resolved=!0,h&&h(),h=s=r=void 0,Ht(c.effects),$();if(w)return h?g:Y(O=>(h=O,s&&(ue({id:s.id+"F",count:0}),s=void 0),e.fallback),d)})})}})}const ln=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],an=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...ln]),cn=new Set(["innerHTML","textContent","innerText","children"]),un=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),dn=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function fn(e,t){const n=dn[e];return typeof n=="object"?n[t]?n.$:void 0:n}const hn=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Z=e=>j(()=>e());function gn(e,t,n){let s=n.length,r=t.length,i=s,o=0,l=0,a=t[r-1].nextSibling,u=null;for(;o<r||l<i;){if(t[o]===n[l]){o++,l++;continue}for(;t[r-1]===n[i-1];)r--,i--;if(r===o){const c=i<s?l?n[l-1].nextSibling:n[i-l]:a;for(;l<i;)e.insertBefore(n[l++],c)}else if(i===l)for(;o<r;)(!u||!u.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[l]===t[r-1]){const c=t[--r].nextSibling;e.insertBefore(n[l++],t[o++].nextSibling),e.insertBefore(n[--i],c),t[r]=n[i]}else{if(!u){u=new Map;let d=l;for(;d<i;)u.set(n[d],d++)}const c=u.get(t[o]);if(c!=null)if(l<c&&c<i){let d=o,f=1,h;for(;++d<r&&d<i&&!((h=u.get(t[d]))==null||h!==c+f);)f++;if(f>c-l){const $=t[o];for(;l<c;)e.insertBefore(n[l++],$)}else e.replaceChild(n[l++],t[o++])}else o++;else t[o++].remove()}}}const st="_$DX_DELEGATE";function pn(e,t,n,s={}){let r;return Y(i=>{r=i,t===document?e():y(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{r(),t.textContent=""}}function C(e,t,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function le(e,t=window.document){const n=t[st]||(t[st]=new Set);for(let s=0,r=e.length;s<r;s++){const i=e[s];n.has(i)||(n.add(i),t.addEventListener(i,_n))}}function he(e,t,n){xe(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function mn(e,t,n){xe(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function ae(e,t){xe(e)||(t==null?e.removeAttribute("class"):e.className=t)}function bn(e,t,n,s){if(s)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=i=>r.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function wn(e,t,n={}){const s=Object.keys(t||{}),r=Object.keys(n);let i,o;for(i=0,o=r.length;i<o;i++){const l=r[i];!l||l==="undefined"||t[l]||(it(e,l,!1),delete n[l])}for(i=0,o=s.length;i<o;i++){const l=s[i],a=!!t[l];!l||l==="undefined"||n[l]===a||!a||(it(e,l,!0),n[l]=a)}return n}function xn(e,t,n){if(!t)return n?he(e,"style"):t;const s=e.style;if(typeof t=="string")return s.cssText=t;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),t||(t={});let r,i;for(i in n)t[i]==null&&s.removeProperty(i),delete n[i];for(i in t)r=t[i],r!==n[i]&&(s.setProperty(i,r),n[i]=r);return n}function yn(e,t={},n,s){const r={};return M(()=>r.children=ge(e,t.children,r.children)),M(()=>typeof t.ref=="function"&&Fe(t.ref,e)),M(()=>vn(e,t,n,!0,r,!0)),r}function Fe(e,t,n){return q(()=>e(t,n))}function y(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return ge(e,t,s,n);M(r=>ge(e,t(),r,n),s)}function vn(e,t,n,s,r={},i=!1){t||(t={});for(const o in r)if(!(o in t)){if(o==="children")continue;r[o]=ot(e,o,null,r[o],n,i,t)}for(const o in t){if(o==="children")continue;const l=t[o];r[o]=ot(e,o,l,r[o],n,i,t)}}function xe(e){return!!L.context&&!L.done&&(!e||e.isConnected)}function $n(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function it(e,t,n){const s=t.trim().split(/\s+/);for(let r=0,i=s.length;r<i;r++)e.classList.toggle(s[r],n)}function ot(e,t,n,s,r,i,o){let l,a,u,c,d;if(t==="style")return xn(e,n,s);if(t==="classList")return wn(e,n,s);if(n===s)return s;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);s&&e.removeEventListener(f,s,typeof s!="function"&&s),n&&e.addEventListener(f,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);s&&e.removeEventListener(f,s,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),h=hn.has(f);if(!h&&s){const $=Array.isArray(s)?s[0]:s;e.removeEventListener(f,$)}(h||n)&&(bn(e,f,n,h),h&&le([f]))}else if(t.slice(0,5)==="attr:")he(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")mn(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(u=cn.has(t))||(c=fn(t,e.tagName))||(a=an.has(t))||(l=e.nodeName.includes("-")||"is"in o)){if(d)t=t.slice(5),a=!0;else if(xe(e))return n;t==="class"||t==="className"?ae(e,n):l&&!a&&!u?e[$n(t)]=n:e[c||t]=n}else he(e,un[t]||t,n);return n}function _n(e){if(L.registry&&L.events&&L.events.find(([a,u])=>u===e))return;let t=e.target;const n=`$$${e.type}`,s=e.target,r=e.currentTarget,i=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[n];if(a&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?a.call(t,u,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},l=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),L.registry&&!L.done&&(L.done=_$HY.done=!0),e.composedPath){const a=e.composedPath();i(a[0]);for(let u=0;u<a.length-2&&(t=a[u],!!o());u++){if(t._$host){t=t._$host,l();break}if(t.parentNode===r)break}}else l();i(s)}function ge(e,t,n,s,r){const i=xe(e);if(i){!n&&(n=[...e.childNodes]);let a=[];for(let u=0;u<n.length;u++){const c=n[u];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():a.push(c)}n=a}for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,l=s!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(i||o==="number"&&(t=t.toString(),t===n))return n;if(l){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=re(e,n,s,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(i)return n;n=re(e,n,s)}else{if(o==="function")return M(()=>{let a=t();for(;typeof a=="function";)a=a();n=ge(e,a,n,s)}),()=>n;if(Array.isArray(t)){const a=[],u=n&&Array.isArray(n);if(Me(a,t,n,r))return M(()=>n=ge(e,a,n,s,!0)),()=>n;if(i){if(!a.length)return n;if(s===void 0)return n=[...e.childNodes];let c=a[0];if(c.parentNode!==e)return n;const d=[c];for(;(c=c.nextSibling)!==s;)d.push(c);return n=d}if(a.length===0){if(n=re(e,n,s),l)return n}else u?n.length===0?lt(e,a,s):gn(e,n,a):(n&&re(e),lt(e,a));n=a}else if(t.nodeType){if(i&&t.parentNode)return n=l?[t]:t;if(Array.isArray(n)){if(l)return n=re(e,n,s,t);re(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Me(e,t,n,s){let r=!1;for(let i=0,o=t.length;i<o;i++){let l=t[i],a=n&&n[e.length],u;if(!(l==null||l===!0||l===!1))if((u=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))r=Me(e,l,a)||r;else if(u==="function")if(s){for(;typeof l=="function";)l=l();r=Me(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||r}else e.push(l),r=!0;else{const c=String(l);a&&a.nodeType===3&&a.data===c?e.push(a):e.push(document.createTextNode(c))}}return r}function lt(e,t,n=null){for(let s=0,r=t.length;s<r;s++)e.insertBefore(t[s],n)}function re(e,t,n,s){if(n===void 0)return e.textContent="";const r=s||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const l=t[o];if(r!==l){const a=l.parentNode===e;!i&&!o?a?e.replaceChild(r,l):e.insertBefore(r,n):a&&l.remove()}else i=!0}}else e.insertBefore(r,n);return[r]}const Sn=!1;function Ct(){let e=new Set;function t(r){return e.add(r),()=>e.delete(r)}let n=!1;function s(r,i){if(n)return!(n=!1);const o={to:r,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const l of e)l.listener({...o,from:l.location,retry:a=>{a&&(n=!0),l.navigate(r,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:t,confirm:s}}let je;function qe(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),je=window.history.state._depth}qe();function Cn(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function kn(e,t){let n=!1;return()=>{const s=je;qe();const r=s==null?null:je-s;if(n){n=!1;return}r&&t(r)?(n=!0,window.history.go(-r)):e()}}const An=/^(?:[a-z0-9]+:)?\/\//i,En=/^\/+|(\/)\/+$/g,kt="http://sr";function te(e,t=!1){const n=e.replace(En,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function _e(e,t,n){if(An.test(t))return;const s=te(e),r=n&&te(n);let i="";return!r||t.startsWith("/")?i=s:r.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+r:i=r,(i||"/")+te(t,!i)}function Pn(e,t){if(e==null)throw new Error(t);return e}function On(e,t){return te(e).replace(/\/*(\*.*)?$/g,"")+te(t)}function At(e){const t={};return e.searchParams.forEach((n,s)=>{s in t?Array.isArray(t[s])?t[s].push(n):t[s]=[t[s],n]:t[s]=n}),t}function Ln(e,t,n){const[s,r]=e.split("/*",2),i=s.split("/").filter(Boolean),o=i.length;return l=>{const a=l.split("/").filter(Boolean),u=a.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const c={path:o?"":"/",params:{}},d=f=>n===void 0?void 0:n[f];for(let f=0;f<o;f++){const h=i[f],$=h[0]===":",g=$?a[f]:a[f].toLowerCase(),v=$?h.slice(1):h.toLowerCase();if($&&Ie(g,d(v)))c.params[v]=g;else if($||!Ie(g,v))return null;c.path+=`/${g}`}if(r){const f=u?a.slice(-u).join("/"):"";if(Ie(f,d(r)))c.params[r]=f;else return null}return c}}function Ie(e,t){const n=s=>s===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Tn(e){const[t,n]=e.pattern.split("/*",2),s=t.split("/").filter(Boolean);return s.reduce((r,i)=>r+(i.startsWith(":")?2:3),s.length-(n===void 0?0:1))}function Et(e){const t=new Map,n=We();return new Proxy({},{get(s,r){return t.has(r)||bt(n,()=>t.set(r,j(()=>e()[r]))),t.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(s,r){return r in e()}})}function Pt(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),s=e.slice(t.index+t[0].length);const r=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(s);)r.push(n+=t[1]),s=s.slice(t[0].length);return Pt(s).reduce((i,o)=>[...i,...r.map(l=>l+o)],[])}const In=100,Ot=Pe(),He=Pe(),ye=()=>Pn(be(Ot),"<A> and 'use' router primitives can be only used inside a Route."),Rn=()=>be(He)||ye().base,Nn=e=>{const t=Rn();return j(()=>t.resolvePath(e()))},Un=e=>{const t=ye();return j(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Ge=()=>ye().navigatorFactory(),Lt=()=>ye().location,Fn=()=>ye().params;function Mn(e,t=""){const{component:n,preload:s,load:r,children:i,info:o}=e,l=!i||Array.isArray(i)&&!i.length,a={key:e,component:n,preload:s||r,info:o};return Tt(e.path).reduce((u,c)=>{for(const d of Pt(c)){const f=On(t,d);let h=l?f:f.split("/*",1)[0];h=h.split("/").map($=>$.startsWith(":")||$.startsWith("*")?$:encodeURIComponent($)).join("/"),u.push({...a,originalPath:c,pattern:h,matcher:Ln(h,!l,e.matchFilters)})}return u},[])}function jn(e,t=0){return{routes:e,score:Tn(e[e.length-1])*1e4-t,matcher(n){const s=[];for(let r=e.length-1;r>=0;r--){const i=e[r],o=i.matcher(n);if(!o)return null;s.unshift({...o,route:i})}return s}}}function Tt(e){return Array.isArray(e)?e:[e]}function It(e,t="",n=[],s=[]){const r=Tt(e);for(let i=0,o=r.length;i<o;i++){const l=r[i];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const a=Mn(l,t);for(const u of a){n.push(u);const c=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!c)It(l.children,u.pattern,n,s);else{const d=jn([...n],s.length);s.push(d)}n.pop()}}}return n.length?s:s.sort((i,o)=>o.score-i.score)}function Re(e,t){for(let n=0,s=e.length;n<s;n++){const r=e[n].matcher(t);if(r)return r}return[]}function Dn(e,t,n){const s=new URL(kt),r=j(c=>{const d=e();try{return new URL(d,s)}catch{return console.error(`Invalid path ${d}`),c}},s,{equals:(c,d)=>c.href===d.href}),i=j(()=>r().pathname),o=j(()=>r().search,!0),l=j(()=>r().hash),a=()=>"",u=Ve(o,()=>At(r()));return{get pathname(){return i()},get search(){return o()},get hash(){return l()},get state(){return t()},get key(){return a()},query:n?n(u):Et(u)}}let ee;function Vn(){return ee}function Bn(e,t,n,s={}){const{signal:[r,i],utils:o={}}=e,l=o.parsePath||(E=>E),a=o.renderPath||(E=>E),u=o.beforeLeave||Ct(),c=_e("",s.base||"");if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!r().value&&i({value:c,replace:!0,scroll:!1});const[d,f]=R(!1);let h;const $=(E,U)=>{U.value===g()&&U.state===k()||(h===void 0&&f(!0),ee=E,h=U,qt(()=>{h===U&&(v(h.value),w(h.state),S[1](B=>B.filter(X=>X.pending)))}).finally(()=>{h===U&&Kt(()=>{ee=void 0,E==="navigate"&&K(h),f(!1),h=void 0})}))},[g,v]=R(r().value),[k,w]=R(r().state),O=Dn(g,k,o.queryWrapper),_=[],S=R([]),b=j(()=>typeof s.transformUrl=="function"?Re(t(),s.transformUrl(O.pathname)):Re(t(),O.pathname)),m=()=>{const E=b(),U={};for(let B=0;B<E.length;B++)Object.assign(U,E[B].params);return U},A=o.paramsWrapper?o.paramsWrapper(m,t):Et(m),N={pattern:c,path:()=>c,outlet:()=>null,resolvePath(E){return _e(c,E)}};return M(Ve(r,E=>$("native",E),{defer:!0})),{base:N,location:O,params:A,isRouting:d,renderPath:a,parsePath:l,navigatorFactory:V,matches:b,beforeLeave:u,preloadRoute:J,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:S};function D(E,U,B){q(()=>{if(typeof U=="number"){U&&(o.go?o.go(U):console.warn("Router integration does not support relative routing"));return}const X=!U||U[0]==="?",{replace:Oe,resolve:ne,scroll:Le,state:ce}={replace:!1,resolve:!X,scroll:!0,...B},ve=ne?E.resolvePath(U):_e(X&&O.pathname||"",U);if(ve===void 0)throw new Error(`Path '${U}' is not a routable path`);if(_.length>=In)throw new Error("Too many redirects");const Qe=g();(ve!==Qe||ce!==k())&&(Sn||u.confirm(ve,B)&&(_.push({value:Qe,replace:Oe,scroll:Le,state:k()}),$("navigate",{value:ve,state:ce})))})}function V(E){return E=E||be(He)||N,(U,B)=>D(E,U,B)}function K(E){const U=_[0];U&&(i({...E,replace:U.replace,scroll:U.scroll}),_.length=0)}function J(E,U){const B=Re(t(),E.pathname),X=ee;ee="preload";for(let Oe in B){const{route:ne,params:Le}=B[Oe];ne.component&&ne.component.preload&&ne.component.preload();const{preload:ce}=ne;U&&ce&&bt(n(),()=>ce({params:Le,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:At(E),state:null,key:""},intent:"preload"}))}ee=X}}function Wn(e,t,n,s){const{base:r,location:i,params:o}=e,{pattern:l,component:a,preload:u}=s().route,c=j(()=>s().path);a&&a.preload&&a.preload();const d=u?u({params:o,location:i,intent:ee||"initial"}):void 0;return{parent:t,pattern:l,path:c,outlet:()=>a?p(a,{params:o,location:i,data:d,get children(){return n()}}):n(),resolvePath(h){return _e(r.path(),h,c())}}}const zn=e=>t=>{const{base:n}=t,s=wt(()=>t.children),r=j(()=>It(s(),t.base||""));let i;const o=Bn(e,r,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(o),p(Ot.Provider,{value:o,get children(){return p(Kn,{routerState:o,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[Z(()=>(i=We())&&null),p(qn,{routerState:o,get branches(){return r()}})]}})}})};function Kn(e){const t=e.routerState.location,n=e.routerState.params,s=j(()=>e.preload&&q(()=>{e.preload({params:n,location:t,intent:Vn()||"initial"})}));return p(I,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:r=>p(r,{params:n,location:t,get data(){return s()},get children(){return e.children}})})}function qn(e){const t=[];let n;const s=j(Ve(e.routerState.matches,(r,i,o)=>{let l=i&&r.length===i.length;const a=[];for(let u=0,c=r.length;u<c;u++){const d=i&&i[u],f=r[u];o&&d&&f.route.key===d.route.key?a[u]=o[u]:(l=!1,t[u]&&t[u](),Y(h=>{t[u]=h,a[u]=Wn(e.routerState,a[u-1]||e.routerState.base,at(()=>s()[u+1]),()=>{const $=e.routerState.matches();return $[u]??$[0]})}))}return t.splice(r.length).forEach(u=>u()),o&&l?o:(n=a[0],a)}));return at(()=>s()&&n)()}const at=e=>()=>p(I,{get when(){return e()},keyed:!0,children:t=>p(He.Provider,{value:t,get children(){return t.outlet()}})});function Hn([e,t],n,s){return[e,s?r=>t(s(r)):t]}function Gn(e){let t=!1;const n=r=>typeof r=="string"?{value:r}:r,s=Hn(R(n(e.get()),{equals:(r,i)=>r.value===i.value&&r.state===i.state}),void 0,r=>(!t&&e.set(r),L.registry&&!L.done&&(L.done=!0),r));return e.init&&me(e.init((r=e.get())=>{t=!0,s[1](n(r)),t=!1})),zn({signal:s,create:e.create,utils:e.utils})}function Jn(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Xn(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Yn=new Map;function Qn(e=!0,t=!1,n="/_server",s){return r=>{const i=r.base.path(),o=r.navigatorFactory(r.base);let l,a;function u(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function c(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const v=g.composedPath().find(b=>b instanceof Node&&b.nodeName.toUpperCase()==="A");if(!v||t&&!v.hasAttribute("link"))return;const k=u(v),w=k?v.href.baseVal:v.href;if((k?v.target.baseVal:v.target)||!w&&!v.hasAttribute("state"))return;const _=(v.getAttribute("rel")||"").split(/\s+/);if(v.hasAttribute("download")||_&&_.includes("external"))return;const S=k?new URL(w,document.baseURI):new URL(w);if(!(S.origin!==window.location.origin||i&&S.pathname&&!S.pathname.toLowerCase().startsWith(i.toLowerCase())))return[v,S]}function d(g){const v=c(g);if(!v)return;const[k,w]=v,O=r.parsePath(w.pathname+w.search+w.hash),_=k.getAttribute("state");g.preventDefault(),o(O,{resolve:!1,replace:k.hasAttribute("replace"),scroll:!k.hasAttribute("noscroll"),state:_?JSON.parse(_):void 0})}function f(g){const v=c(g);if(!v)return;const[k,w]=v;s&&(w.pathname=s(w.pathname)),r.preloadRoute(w,k.getAttribute("preload")!=="false")}function h(g){clearTimeout(l);const v=c(g);if(!v)return a=null;const[k,w]=v;a!==k&&(s&&(w.pathname=s(w.pathname)),l=setTimeout(()=>{r.preloadRoute(w,k.getAttribute("preload")!=="false"),a=k},20))}function $(g){if(g.defaultPrevented)return;let v=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!v)return;if(!v.startsWith("https://action/")){const w=new URL(v,kt);if(v=r.parsePath(w.pathname+w.search),!v.startsWith(n))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const k=Yn.get(v);if(k){g.preventDefault();const w=new FormData(g.target,g.submitter);k.call({r,f:g.target},g.target.enctype==="multipart/form-data"?w:new URLSearchParams(w))}}le(["click","submit"]),document.addEventListener("click",d),e&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",$),me(()=>{document.removeEventListener("click",d),e&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",$)})}}function Zn(e){const t=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,r=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:r}},n=Ct();return Gn({get:t,set({value:s,replace:r,scroll:i,state:o}){r?window.history.replaceState(Cn(o),"",s):window.history.pushState(o,"",s),Xn(decodeURIComponent(window.location.hash.slice(1)),i),qe()},init:s=>Jn(window,"popstate",kn(s,r=>{if(r)return!n.confirm(r);{const i=t();return!n.confirm(i.value,{state:i.state})}})),create:Qn(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:n}})(e)}var er=C("<a>");function pe(e){e=rt({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=nn(e,["href","state","class","activeClass","inactiveClass","end"]),n=Nn(()=>e.href),s=Un(n),r=Lt(),i=j(()=>{const o=n();if(o===void 0)return[!1,!1];const l=te(o.split(/[?#]/,1)[0]).toLowerCase(),a=decodeURI(te(r.pathname).toLowerCase());return[e.end?l===a:a.startsWith(l+"/")||a===l,l===a]});return(()=>{var o=er();return yn(o,rt(t,{get href(){return s()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!i()[0],[e.activeClass]:i()[0],...t.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1),o})()}function De(e){const t=Ge(),n=Lt(),{href:s,state:r}=e,i=typeof s=="function"?s({navigate:t,location:n}):s;return t(i,{replace:!0,state:r}),null}const[Rt,tr]=R(null),[nr,ct]=R(!1);async function rr(){const e=await fetch("/api/config");if(!e.ok)throw new Error("Failed to fetch config");return e.json()}async function sr(){const t=(await rr()).clerkPublishableKey;if(!t)throw new Error("Clerk publishable key not configured on server");const n=new Ut(t);return await n.load(),tr(n),ct(!!n.session),n.addListener(s=>{ct(!!s.session)}),n}function ie(){return Rt()}function Je(){return nr()}async function ir(){const e=Rt();e&&await e.signOut()}const ut="optagon:connection",oe={production:"wss://optagon.app/ws",localhost:"ws://localhost:33001/ws"};function or(){const e=typeof localStorage<"u"?localStorage.getItem(ut):null,t=e?JSON.parse(e):{mode:"auto",customUrl:""},[n,s]=R(t);function r(l){s(a=>{const u={...a,...l};return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(u)),u})}function i(){const l=n();switch(l.mode){case"production":return oe.production;case"localhost":return oe.localhost;case"custom":return l.customUrl||oe.production;case"auto":default:return typeof window<"u"?`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`:oe.production}}function o(l){switch(l){case"auto":return"Auto (current origin)";case"production":return"Production (optagon.app)";case"localhost":return"Localhost (dev)";case"custom":return"Custom URL"}}return{config:n,setConfig:r,getWebSocketUrl:i,getModeLabel:o}}const se=Y(()=>or());function lr(){const[e,t]=R("disconnected"),[n,s]=R([]),[r,i]=R([]),[o,l]=R(!1),[a,u]=R(null);let c=null,d=async()=>null,f=0,h=null;const $=3e4,g=new Map;function v(){if(c?.readyState===WebSocket.OPEN||c?.readyState===WebSocket.CONNECTING)return;h&&(clearTimeout(h),h=null),t("connecting"),u(null);const m=se.getWebSocketUrl();console.log("[tunnel] Connecting to",m),c=new WebSocket(m),c.onopen=async()=>{console.log("[tunnel] WebSocket opened, authenticating..."),t("authenticating");const A=await d();if(!A){console.error("[tunnel] No auth token available"),t("error"),u("Not signed in"),c?.close();return}w({type:"pwa_auth",token:A})},c.onmessage=A=>{try{const N=JSON.parse(A.data);k(N)}catch(N){console.error("[tunnel] Failed to parse message:",N)}},c.onclose=A=>{console.log("[tunnel] WebSocket closed:",A.code,A.reason),c=null,e()!=="error"&&t("disconnected"),O()},c.onerror=A=>{console.error("[tunnel] WebSocket error:",A),t("error"),u("Connection failed")}}function k(m){switch(m.type){case"pwa_auth_success":console.log("[tunnel] Authenticated as",m.userId),t("connected"),f=0;break;case"pwa_auth_error":console.error("[tunnel] Auth error:",m.message),t("error"),u(m.message);break;case"server_status":console.log("[tunnel] Server status:",m.connected?"online":"offline"),l(m.connected);break;case"servers_sync":console.log("[tunnel] Servers sync:",m.servers.length,"servers"),i(m.servers),l(m.servers.some(A=>A.connected));break;case"frames_sync":console.log("[tunnel] Frames sync:",m.frames.length,"frames"),s(m.frames);break;case"terminal_opened":{const A=g.get(m.channelId);A&&A.onOpened(m.cols,m.rows);break}case"terminal_data":{const A=g.get(m.channelId);A&&A.onData(atob(m.data));break}case"terminal_close":{const A=g.get(m.channelId);A&&(A.onClose(),g.delete(m.channelId));break}case"terminal_error":{const A=g.get(m.channelId);A&&(A.onError(m.message),g.delete(m.channelId));break}default:console.log("[tunnel] Unknown message type:",m.type)}}function w(m){c?.readyState===WebSocket.OPEN?c.send(JSON.stringify(m)):console.warn("[tunnel] Cannot send, WebSocket not open")}function O(){if(e()==="error"&&a()?.includes("sign"))return;const m=Math.min(1e3*Math.pow(2,f),$);f++,console.log(`[tunnel] Reconnecting in ${m}ms (attempt ${f})`),h=setTimeout(v,m)}function _(m,A){const N=crypto.randomUUID();return g.set(N,{onData:A.onData,onOpened:A.onOpened||(()=>{}),onClose:A.onClose||(()=>{}),onError:A.onError||(()=>{})}),w({type:"terminal_open",channelId:N,frameId:m}),{write:D=>{w({type:"terminal_data",channelId:N,data:btoa(D)})},resize:(D,V)=>{w({type:"terminal_resize",channelId:N,cols:D,rows:V})},close:()=>{w({type:"terminal_close",channelId:N}),g.delete(N)}}}function S(m){d=m}function b(){h&&(clearTimeout(h),h=null),c?.close(),c=null,t("disconnected")}return typeof document<"u"&&(document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()==="disconnected"&&(console.log("[tunnel] App became visible, reconnecting..."),v())}),window.addEventListener("online",()=>{(e()==="disconnected"||e()==="error")&&(console.log("[tunnel] Network online, reconnecting..."),f=0,v())}),window.addEventListener("offline",()=>{console.log("[tunnel] Network offline"),t("disconnected")})),{state:e,frames:n,servers:r,serverConnected:o,error:a,connect:v,disconnect:b,openTerminal:_,setTokenGetter:S}}const T=Y(()=>lr());var ar=C('<header class="sticky top-0 z-10 bg-slate-800 border-b border-slate-700"><div class="flex items-center justify-between px-4 py-3"><div class="flex items-center gap-3">'),cr=C('<div class="flex items-center gap-2 text-sm text-slate-400"><span></span><span class="hidden sm:inline">'),ur=C('<svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx=12 cy=12 r=3>');function Xe(){return(()=>{var e=ar(),t=e.firstChild,n=t.firstChild;return y(t,p(pe,{href:"/",class:"text-lg font-semibold text-white",children:"Optagon"}),n),y(n,p(dr,{}),null),y(n,p(pe,{href:"/settings",class:"p-2 text-slate-400 hover:text-white transition-colors","aria-label":"Settings",get children(){return p(fr,{})}}),null),e})()}function dr(){const e=T.state,t=T.serverConnected,n=()=>{const r=e();return r==="connected"?t()?"Online":"Server offline":r==="connecting"||r==="authenticating"?"Connecting...":r==="error"?"Error":"Offline"},s=()=>{const r=e();return r==="connected"&&t()?"bg-green-500":r==="connected"&&!t()?"bg-yellow-500":r==="connecting"||r==="authenticating"?"bg-blue-500 status-pulse":r==="error"?"bg-red-500":"bg-slate-500"};return(()=>{var r=cr(),i=r.firstChild,o=i.nextSibling;return y(o,n),M(()=>ae(i,`w-2 h-2 rounded-full ${s()}`)),r})()}function fr(){return ur()}var hr=C('<div class="flex items-start justify-between"><div class="flex items-center gap-2"><span></span><h3 class="font-medium text-white">'),gr=C('<p class="mt-1 text-sm text-slate-400 truncate">'),pr=C('<div class="mt-3 flex items-center gap-3 text-xs text-slate-500"><span>'),mr=C("<span> port");function br(e){const t=()=>e.frame,n=()=>{switch(t().status){case"running":return"bg-green-500";case"stopped":return"bg-slate-500";case"error":return"bg-red-500";default:return"bg-slate-500"}},s=()=>{switch(t().status){case"running":return"Running";case"stopped":return"Stopped";case"error":return"Error";default:return"Unknown"}};return p(pe,{get href(){return`/frame/${t().id}`},class:"block p-4 bg-slate-800 rounded-lg border border-slate-700 hover:border-slate-600 transition-colors",get children(){return[(()=>{var r=hr(),i=r.firstChild,o=i.firstChild,l=o.nextSibling;return y(l,()=>t().name),M(()=>ae(o,`w-2 h-2 rounded-full ${n()}`)),r})(),(()=>{var r=gr();return y(r,()=>t().workspace),r})(),(()=>{var r=pr(),i=r.firstChild;return y(i,s),y(r,(()=>{var o=Z(()=>t().ports.length>0);return()=>o()&&(()=>{var l=mr(),a=l.firstChild;return y(l,()=>t().ports.length,a),y(l,()=>t().ports.length!==1?"s":"",null),l})()})(),null),r})()]}})}var wr=C('<div class="p-4 bg-red-900/30 border border-red-800 rounded-lg"><h2 class="font-medium text-red-300">Connection Error</h2><p class="mt-1 text-sm text-red-400"></p><button class="mt-3 px-4 py-2 bg-red-800 hover:bg-red-700 text-white rounded transition-colors">Retry'),xr=C('<div class="p-4 bg-slate-800 border border-slate-700 rounded-lg"><div class="flex items-center gap-3"><div class="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div><span class=text-slate-300>Connecting to server...'),yr=C(`<div class="p-4 bg-yellow-900/30 border border-yellow-800 rounded-lg"><h2 class="font-medium text-yellow-300">Server Offline</h2><p class="mt-1 text-sm text-yellow-400">Your Optagon server at home isn't connected. Make sure it's running and has internet access.`),vr=C('<div class="grid gap-3">'),$r=C("<div class=space-y-4>"),_r=C('<div class="text-center py-12"><div class="text-4xl mb-4">ðŸ“¦</div><h2 class="text-lg font-medium text-slate-300">No frames yet</h2><p class="mt-1 text-sm text-slate-500">Create a frame on your server to get started</p><code class="mt-4 inline-block px-3 py-2 bg-slate-800 rounded text-sm text-slate-400">optagon frame create my-project');function Sr(){const e=T.frames,t=T.state,n=T.serverConnected,s=T.error;return(()=>{var r=$r();return y(r,p(I,{get when(){return t()==="error"},get children(){var i=wr(),o=i.firstChild,l=o.nextSibling,a=l.nextSibling;return y(l,s),a.$$click=()=>T.connect(),i}}),null),y(r,p(I,{get when(){return t()==="connecting"||t()==="authenticating"},get children(){return xr()}}),null),y(r,p(I,{get when(){return Z(()=>t()==="connected")()&&!n()},get children(){return yr()}}),null),y(r,p(I,{get when(){return Z(()=>t()==="connected")()&&n()},get children(){return p(I,{get when(){return e().length>0},get fallback(){return p(Cr,{})},get children(){var i=vr();return y(i,p(St,{get each(){return e()},children:o=>p(br,{frame:o})})),i}})}}),null),r})()}function Cr(){return _r()}le(["click"]);var kr=Ft(),Ar=Mt(),Er=jt(),Pr=C('<div class="px-4 py-2 bg-slate-800 text-slate-400 text-sm">Connecting to terminal...'),Or=C('<div class="px-4 py-2 bg-red-900/50 text-red-300 text-sm">'),Lr=C('<div class="flex flex-col h-full"><div class="flex-1 min-h-0 bg-terminal-bg"style=padding:8px></div><div class="md:hidden p-2 bg-slate-800 border-t border-slate-700"><input type=text class="w-full bg-slate-900 text-white px-3 py-2 rounded border border-slate-700 focus:border-blue-500 focus:outline-none"placeholder="Type here for mobile input..."autocomplete=off autocapitalize=off autocorrect=off>');function Tr(e){let t,n,s,r,i;const[o,l]=R("connecting"),[a,u]=R(null);Be(()=>{if(!t)return;s=new kr.Terminal({fontFamily:"JetBrains Mono, Menlo, Monaco, monospace",fontSize:14,lineHeight:1.2,cursorBlink:!0,cursorStyle:"block",allowProposedApi:!0,theme:{background:"#0f172a",foreground:"#e2e8f0",cursor:"#e2e8f0",selectionBackground:"rgba(255, 255, 255, 0.3)",black:"#1e293b",red:"#f87171",green:"#4ade80",yellow:"#facc15",blue:"#60a5fa",magenta:"#c084fc",cyan:"#22d3ee",white:"#f1f5f9",brightBlack:"#475569",brightRed:"#fca5a5",brightGreen:"#86efac",brightYellow:"#fde047",brightBlue:"#93c5fd",brightMagenta:"#d8b4fe",brightCyan:"#67e8f9",brightWhite:"#ffffff"}}),r=new Ar.FitAddon,s.loadAddon(r);try{const h=new Er.WebglAddon;h.onContextLoss(()=>{h.dispose()}),s.loadAddon(h)}catch{console.warn("[terminal] WebGL addon not available, using canvas")}s.open(t),setTimeout(()=>{r?.fit()},0),i=T.openTerminal(e.frameId,{onData:h=>{s?.write(h)},onOpened:(h,$)=>{l("connected"),s&&i?.resize(s.cols,s.rows)},onClose:()=>{s?.write(`\r
\x1B[31m[Terminal closed]\x1B[0m\r
`)},onError:h=>{l("error"),u(h),s?.write(`\r
\x1B[31m[Error: ${h}]\x1B[0m\r
`)}}),s.onData(h=>{i?.write(h)});const f=new ResizeObserver(()=>{r&&s&&(r.fit(),i?.resize(s.cols,s.rows))});f.observe(t),t.addEventListener("click",()=>{s?.focus()}),me(()=>{i?.close(),f.disconnect(),s?.dispose()})});const c=f=>{const h=f.currentTarget,$=h.value;$&&(i?.write($),h.value="")},d=f=>{f.key==="Enter"?(i?.write("\r"),f.preventDefault()):f.key==="Backspace"&&(i?.write(""),f.preventDefault())};return(()=>{var f=Lr(),h=f.firstChild,$=h.nextSibling,g=$.firstChild;y(f,p(I,{get when(){return o()==="connecting"},get children(){return Pr()}}),h),y(f,p(I,{get when(){return o()==="error"},get children(){var w=Or();return y(w,()=>a()||"Terminal error"),w}}),h);var v=t;typeof v=="function"?Fe(v,h):t=h,g.$$keydown=d,g.$$input=c;var k=n;return typeof k=="function"?Fe(k,g):n=g,he(g,"spellcheck",!1),f})()}le(["input","keydown"]);var Ir=C('<p class="text-xs text-slate-500 truncate max-w-[200px]">'),Rr=C('<div class="flex flex-col h-screen"><header class="flex-none bg-slate-800 border-b border-slate-700"><div class="flex items-center justify-between px-4 py-3"><div class="flex items-center gap-3"><div><h1 class="font-medium text-white"></h1></div></div><div class="flex items-center gap-2"></div></div></header><div class="flex-1 min-h-0">'),Nr=C('<div class="flex items-center justify-center h-full"><div class=text-center><p class=text-slate-400>Frame not found'),Ur=C('<div class="flex items-center justify-center h-full"><div class=text-center><p class=text-slate-400>Frame is not running</p><p class="mt-2 text-sm text-slate-500">Start the frame from your server to access the terminal</p><code class="mt-4 inline-block px-3 py-2 bg-slate-800 rounded text-sm text-slate-400">optagon frame start '),Fr=C('<div class="flex items-center gap-2 text-xs text-slate-400"><span></span><span>'),Mr=C('<svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="m15 18-6-6 6-6">');function jr(){const e=Fn(),t=j(()=>T.frames().find(n=>n.id===e.id));return(()=>{var n=Rr(),s=n.firstChild,r=s.firstChild,i=r.firstChild,o=i.firstChild,l=o.firstChild,a=i.nextSibling,u=s.nextSibling;return y(i,p(pe,{href:"/",class:"p-1 text-slate-400 hover:text-white transition-colors","aria-label":"Back to frame list",get children(){return p(Vr,{})}}),o),y(l,()=>t()?.name||"Terminal"),y(o,p(I,{get when(){return t()},get children(){var c=Ir();return y(c,()=>t().workspace),c}}),null),y(a,p(I,{get when(){return t()},get children(){return p(Dr,{get status(){return t().status}})}})),y(u,p(I,{get when(){return t()},get fallback(){return(()=>{var c=Nr(),d=c.firstChild;return d.firstChild,y(d,p(pe,{href:"/",class:"mt-4 inline-block text-blue-400 hover:underline",children:"Back to frames"}),null),c})()},get children(){return p(I,{get when(){return t().status==="running"},get fallback(){return(()=>{var c=Ur(),d=c.firstChild,f=d.firstChild,h=f.nextSibling,$=h.nextSibling;return $.firstChild,y($,()=>t().name,null),c})()},get children(){return p(Tr,{get frameId(){return e.id}})}})}})),n})()}function Dr(e){const t=()=>{switch(e.status){case"running":return"bg-green-500";case"stopped":return"bg-slate-500";case"error":return"bg-red-500"}},n=()=>{switch(e.status){case"running":return"Running";case"stopped":return"Stopped";case"error":return"Error"}};return(()=>{var s=Fr(),r=s.firstChild,i=r.nextSibling;return y(i,n),M(()=>ae(r,`w-2 h-2 rounded-full ${t()}`)),s})()}function Vr(){return Mr()}var Br=C('<div class="text-center mb-8"><h1 class="text-3xl font-bold text-white">Verify your email</h1><p class="mt-2 text-slate-400">We sent a code to <span class=text-white>'),dt=C('<div class="mb-4 p-3 bg-red-900/30 border border-red-800 rounded-lg"><p class="text-sm text-red-300">'),Wr=C('<form class=space-y-4><div><label for=code class="block text-sm font-medium text-slate-300 mb-1">Verification code</label><input id=code type=text inputmode=numeric class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 text-center text-2xl tracking-widest"placeholder=000000 autocomplete=one-time-code maxlength=6></div><button type=submit class="w-full px-4 py-3 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white font-medium transition-colors">'),zr=C(`<div class="mt-4 text-center"><button type=button class="text-sm text-slate-400 hover:text-white disabled:opacity-50">Didn't get the code? Resend`),Kr=C('<div class="mt-4 text-center"><button type=button class="text-sm text-slate-500 hover:text-slate-300">â† Back'),qr=C('<div class="text-center mb-8"><h1 class="text-3xl font-bold text-white">Optagon</h1><p class="mt-2 text-slate-400">Access your development frames'),Hr=C('<button type=button class="w-full flex items-center justify-center gap-3 px-4 py-3 bg-slate-800 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700 rounded-lg text-white font-medium transition-colors"><svg class="w-5 h-5"viewBox="0 0 24 24"fill=currentColor><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>Continue with GitHub'),Gr=C('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-slate-700"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-slate-900 text-slate-500">or'),Jr=C('<form class=space-y-4><div><label for=email class="block text-sm font-medium text-slate-300 mb-1">Email</label><input id=email type=email class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"placeholder=you@example.com autocomplete=email></div><div><label for=password class="block text-sm font-medium text-slate-300 mb-1">Password</label><input id=password type=password class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"placeholder=â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢ autocomplete=current-password></div><button type=submit class="w-full px-4 py-3 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white font-medium transition-colors">'),Xr=C('<p class="mt-6 text-center text-sm text-slate-500">New here? Just enter your email and password to create an account.'),Yr=C('<div class="min-h-screen flex flex-col items-center justify-center p-4 bg-slate-900"><div class="w-full max-w-sm">');function ft(){const e=Ge(),[t,n]=R(""),[s,r]=R(""),[i,o]=R(""),[l,a]=R(!1),[u,c]=R(null),[d,f]=R("initial"),[h,$]=R(null);Be(()=>{Je()&&(T.connect(),e("/",{replace:!0}))});async function g(){a(!0),c(null);try{const _=ie();if(!_?.client)throw new Error("Auth not initialized");const S=await _.client.signIn.create({strategy:"oauth_github",redirectUrl:window.location.origin+"/auth/callback",actionCompleteRedirectUrl:window.location.origin+"/"}),{externalVerificationRedirectURL:b}=S.firstFactorVerification;b&&(window.location.href=b.toString())}catch(_){c(_ instanceof Error?_.message:"GitHub login failed"),a(!1)}}async function v(_){if(_.preventDefault(),!t()||!s()){c("Please enter email and password");return}a(!0),c(null),f("signing-in");const S=ie();if(!S?.client){c("Auth not initialized"),a(!1);return}try{console.log("[auth] Attempting sign in for:",t());const b=await S.client.signIn.create({identifier:t(),password:s()});if(console.log("[auth] Sign in status:",b.status),b.status==="complete"){await S.setActive({session:b.createdSessionId}),T.connect(),e("/",{replace:!0});return}if(b.status==="needs_second_factor"){c("2FA required - not yet supported"),a(!1);return}c("Sign in incomplete"),a(!1)}catch(b){const m=b?.errors?.[0]?.code,A=b?.errors?.[0]?.message||b?.message;m==="form_identifier_not_found"||A?.toLowerCase().includes("not found")||A?.toLowerCase().includes("couldn't find")?await k():m==="form_password_incorrect"?(c("Incorrect password"),a(!1)):(c(A||"Sign in failed"),a(!1))}}async function k(){f("signing-up");const _=ie();if(!_?.client){c("Auth not initialized"),a(!1);return}try{const S=await _.client.signUp.create({emailAddress:t(),password:s()});if(console.log("[auth] Sign up status:",S.status),S.status==="complete"){await _.setActive({session:S.createdSessionId}),T.connect(),e("/",{replace:!0});return}if(S.status==="missing_requirements"){try{await S.prepareEmailAddressVerification({strategy:"email_code"}),$(S),f("verifying"),a(!1)}catch(b){console.error("[auth] Prepare verification error:",b),c(b?.errors?.[0]?.message||"Failed to send verification email"),a(!1)}return}c(`Sign up status: ${S.status}`),a(!1)}catch(S){console.error("[auth] Sign up error:",S);const b=S?.errors?.[0]?.message||S?.message;c(b||"Sign up failed"),a(!1)}}async function w(_){if(_.preventDefault(),!i()){c("Please enter the verification code");return}a(!0),c(null);const S=h(),b=ie();if(!S||!b){c("Session expired, please try again"),f("initial"),a(!1);return}try{const m=await S.attemptEmailAddressVerification({code:i()});m.status==="complete"?(await b.setActive({session:m.createdSessionId}),T.connect(),e("/",{replace:!0})):(c("Verification incomplete"),a(!1))}catch(m){const A=m?.errors?.[0]?.message||m?.message;c(A||"Verification failed"),a(!1)}}async function O(){const _=h();if(_){a(!0),c(null);try{await _.prepareEmailAddressVerification({strategy:"email_code"}),c(null),a(!1)}catch{c("Failed to resend code"),a(!1)}}}return(()=>{var _=Yr(),S=_.firstChild;return y(S,p(I,{get when(){return d()==="verifying"},get children(){return[(()=>{var b=Br(),m=b.firstChild,A=m.nextSibling,N=A.firstChild,D=N.nextSibling;return y(D,t),b})(),p(I,{get when(){return u()},get children(){var b=dt(),m=b.firstChild;return y(m,u),b}}),(()=>{var b=Wr(),m=b.firstChild,A=m.firstChild,N=A.nextSibling,D=m.nextSibling;return b.addEventListener("submit",w),N.$$input=V=>o(V.currentTarget.value),y(D,()=>l()?"Verifying...":"Verify"),M(V=>{var K=l(),J=l();return K!==V.e&&(N.disabled=V.e=K),J!==V.t&&(D.disabled=V.t=J),V},{e:void 0,t:void 0}),M(()=>N.value=i()),b})(),(()=>{var b=zr(),m=b.firstChild;return m.$$click=O,M(()=>m.disabled=l()),b})(),(()=>{var b=Kr(),m=b.firstChild;return m.$$click=()=>{f("initial"),c(null)},b})()]}}),null),y(S,p(I,{get when(){return d()!=="verifying"},get children(){return[qr(),p(I,{get when(){return u()},get children(){var b=dt(),m=b.firstChild;return y(m,u),b}}),(()=>{var b=Hr();return b.$$click=g,M(()=>b.disabled=l()),b})(),Gr(),(()=>{var b=Jr(),m=b.firstChild,A=m.firstChild,N=A.nextSibling,D=m.nextSibling,V=D.firstChild,K=V.nextSibling,J=D.nextSibling;return b.addEventListener("submit",v),N.$$input=E=>n(E.currentTarget.value),K.$$input=E=>r(E.currentTarget.value),y(J,p(I,{get when(){return l()},fallback:"Continue",get children(){return p(I,{get when(){return d()==="signing-up"},fallback:"Signing in...",children:"Creating account..."})}})),M(E=>{var U=l(),B=l(),X=l();return U!==E.e&&(N.disabled=E.e=U),B!==E.t&&(K.disabled=E.t=B),X!==E.a&&(J.disabled=E.a=X),E},{e:void 0,t:void 0,a:void 0}),M(()=>N.value=t()),M(()=>K.value=s()),b})(),Xr()]}}),null),_})()}le(["input","click"]);var Qr=C('<img alt class="w-12 h-12 rounded-full">'),Zr=C('<div class="flex items-center gap-4"><div><p class="font-medium text-white"></p><p class="text-sm text-slate-400">'),es=C('<button class="mb-4 w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors">Reconnect'),ts=C('<p class="text-slate-500 text-sm">Connect to tunnel to see dev servers'),ns=C('<div class="text-center py-4"><p class="text-slate-400 text-sm">No dev servers connected</p><p class="text-slate-500 text-xs mt-1">Run <code class="bg-slate-900 px-1 rounded">optagon tunnel connect</code> on your machine'),rs=C("<div class=space-y-2>"),ss=C('<div class="mt-3 pt-3 border-t border-slate-700"><div class="flex items-center justify-between"><span class="text-slate-400 text-sm">Total Frames</span><span class=text-white>'),is=C('<main class="p-4 max-w-lg mx-auto"><h1 class="text-xl font-semibold text-white mb-6">Settings</h1><section class=mb-8><h2 class="text-sm font-medium text-slate-400 uppercase tracking-wider mb-3">Account</h2><div class="bg-slate-800 rounded-lg border border-slate-700 p-4"><button class="mt-4 w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition-colors">Sign Out</button></div></section><section class=mb-8><h2 class="text-sm font-medium text-slate-400 uppercase tracking-wider mb-3">Tunnel Settings</h2><div class="bg-slate-800 rounded-lg border border-slate-700 p-4"><p class="text-xs text-slate-500 mb-3">Connection to the relay server that routes traffic to your dev servers.</p><div class="flex items-center justify-between mb-4"><span class=text-slate-300>Status</span></div></div></section><section class=mb-8><h2 class="text-sm font-medium text-slate-400 uppercase tracking-wider mb-3">Dev Servers</h2><div class="bg-slate-800 rounded-lg border border-slate-700 p-4"><p class="text-xs text-slate-500 mb-3">Optagon instances running on your machines, providing access to frames.</p></div></section><section><h2 class="text-sm font-medium text-slate-400 uppercase tracking-wider mb-3">About</h2><div class="bg-slate-800 rounded-lg border border-slate-700 p-4"><div class="flex items-center justify-between"><span class=text-slate-300>Version</span><span class="text-slate-400 text-sm">0.1.0</span></div><div class=mt-3><a href=https://github.com/pathoam/optagon target=_blank rel="noopener noreferrer"class="text-blue-400 hover:underline text-sm">View on GitHub'),os=C('<div class="flex items-center justify-between p-2 bg-slate-900 rounded"><div class="flex items-center gap-2"><span></span><span class="text-white font-medium"></span></div><div class=text-right><span class="text-slate-400 text-sm"> frames'),ls=C("<span>"),as=C('<div class="flex gap-2"><input type=text placeholder=ws://your-server:3001/ws class="flex-1 px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"><button class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm rounded transition-colors">Save'),cs=C('<div class="space-y-3 pt-3 border-t border-slate-700"><label class="block text-sm text-slate-300">Tunnel Server</label><div class=space-y-2><label class="flex items-center gap-3 cursor-pointer"><input type=radio name=tunnel-mode class="w-4 h-4 text-blue-500 bg-slate-700 border-slate-600"><div><span class=text-white>Auto</span><p class="text-xs text-slate-500">Use current origin (where PWA is hosted)</p></div></label><label class="flex items-center gap-3 cursor-pointer"><input type=radio name=tunnel-mode class="w-4 h-4 text-blue-500 bg-slate-700 border-slate-600"><div><span class=text-white>Production</span><p class="text-xs text-slate-500"></p></div></label><label class="flex items-center gap-3 cursor-pointer"><input type=radio name=tunnel-mode class="w-4 h-4 text-blue-500 bg-slate-700 border-slate-600"><div><span class=text-white>Localhost</span><p class="text-xs text-slate-500"></p></div></label><label class="flex items-center gap-3 cursor-pointer"><input type=radio name=tunnel-mode class="w-4 h-4 text-blue-500 bg-slate-700 border-slate-600"><div><span class=text-white>Custom URL</span></div></label></div><div class="pt-3 border-t border-slate-700"><div class="flex items-center justify-between"><span class="text-sm text-slate-400">Current URL</span><code class="text-xs text-slate-500 bg-slate-900 px-2 py-1 rounded max-w-[200px] truncate">');function us(){const e=Ge(),t=ie(),n=async()=>{T.disconnect(),await ir(),e("/sign-in",{replace:!0})},s=()=>t?.user;return[p(Xe,{}),(()=>{var r=is(),i=r.firstChild,o=i.nextSibling,l=o.firstChild,a=l.nextSibling,u=a.firstChild,c=o.nextSibling,d=c.firstChild,f=d.nextSibling,h=f.firstChild,$=h.nextSibling;$.firstChild;var g=c.nextSibling,v=g.firstChild,k=v.nextSibling;return k.firstChild,y(a,p(I,{get when(){return s()},get children(){var w=Zr(),O=w.firstChild,_=O.firstChild,S=_.nextSibling;return y(w,p(I,{get when(){return s()?.imageUrl},get children(){var b=Qr();return M(()=>he(b,"src",s().imageUrl)),b}}),O),y(_,()=>s()?.fullName||s()?.username||"User"),y(S,()=>s()?.primaryEmailAddress?.emailAddress),w}}),u),u.$$click=n,y($,p(ds,{}),null),y(f,p(I,{get when(){return T.state()==="disconnected"||T.state()==="error"},get children(){var w=es();return w.$$click=()=>T.connect(),w}}),null),y(f,p(fs,{}),null),y(k,p(I,{get when(){return T.state()!=="connected"},get children(){return ts()}}),null),y(k,p(I,{get when(){return Z(()=>T.state()==="connected")()&&T.servers().length===0},get children(){return ns()}}),null),y(k,p(I,{get when(){return Z(()=>T.state()==="connected")()&&T.servers().length>0},get children(){return[(()=>{var w=rs();return y(w,p(St,{get each(){return T.servers()},children:O=>(()=>{var _=os(),S=_.firstChild,b=S.firstChild,m=b.nextSibling,A=S.nextSibling,N=A.firstChild,D=N.firstChild;return y(m,()=>O.serverName),y(N,()=>O.frameCount,D),M(()=>ae(b,`w-2 h-2 rounded-full ${O.connected?"bg-green-500":"bg-slate-500"}`)),_})()})),w})(),(()=>{var w=ss(),O=w.firstChild,_=O.firstChild,S=_.nextSibling;return y(S,()=>T.frames().length),w})()]}}),null),r})()]}function ds(){const e=T.state,t=()=>{switch(e()){case"connected":return"bg-green-500/20 text-green-400";case"connecting":case"authenticating":return"bg-blue-500/20 text-blue-400";case"error":return"bg-red-500/20 text-red-400";default:return"bg-slate-500/20 text-slate-400"}},n=()=>{switch(e()){case"connected":return"Connected";case"connecting":return"Connecting";case"authenticating":return"Authenticating";case"error":return"Error";default:return"Disconnected"}};return(()=>{var s=ls();return y(s,n),M(()=>ae(s,`px-2 py-1 rounded text-xs font-medium ${t()}`)),s})()}function fs(){const[e,t]=R(se.config().customUrl),n=o=>{se.setConfig({mode:o}),T.disconnect(),setTimeout(()=>T.connect(),100)},s=()=>{se.setConfig({customUrl:e(),mode:"custom"}),T.disconnect(),setTimeout(()=>T.connect(),100)},r=()=>se.config().mode,i=()=>se.getWebSocketUrl();return(()=>{var o=cs(),l=o.firstChild,a=l.nextSibling,u=a.firstChild,c=u.firstChild,d=u.nextSibling,f=d.firstChild,h=f.nextSibling,$=h.firstChild,g=$.nextSibling,v=d.nextSibling,k=v.firstChild,w=k.nextSibling,O=w.firstChild,_=O.nextSibling,S=v.nextSibling,b=S.firstChild,m=a.nextSibling,A=m.firstChild,N=A.firstChild,D=N.nextSibling;return c.addEventListener("change",()=>n("auto")),f.addEventListener("change",()=>n("production")),y(g,()=>oe.production),k.addEventListener("change",()=>n("localhost")),y(_,()=>oe.localhost),b.addEventListener("change",()=>n("custom")),y(o,p(I,{get when(){return r()==="custom"},get children(){var V=as(),K=V.firstChild,J=K.nextSibling;return K.$$input=E=>t(E.currentTarget.value),J.$$click=s,M(()=>K.value=e()),V}}),m),y(D,i),M(()=>c.checked=r()==="auto"),M(()=>f.checked=r()==="production"),M(()=>k.checked=r()==="localhost"),M(()=>b.checked=r()==="custom"),o})()}le(["click","input"]);var hs=C('<div class="flex items-center justify-center min-h-screen"><div class=text-slate-400>Loading...'),gs=C('<div class="flex items-center justify-center min-h-screen"><div class=text-red-400>Error: '),ps=C("<main class=p-4>"),ms=C('<div class="min-h-screen bg-slate-900 text-slate-100">');function ht(){return hs()}function bs(e){return(()=>{var t=gs(),n=t.firstChild;return n.firstChild,y(n,()=>e.message,null),t})()}function Ye(e){return p(I,{get when(){return Je()},get fallback(){return p(De,{href:"/auth"})},get children(){return e.children}})}function ws(){return p(Ye,{get children(){return[p(Xe,{}),(()=>{var e=ps();return y(e,p(Sr,{})),e})()]}})}function xs(){return p(Ye,{get children(){return p(jr,{})}})}function ys(){return p(Ye,{get children(){return[p(Xe,{}),p(us,{})]}})}function vs(e){const[t,n]=R(!0),[s,r]=R(null);return Be(async()=>{try{await sr(),T.setTokenGetter(async()=>{const i=ie()?.session;return i?i.getToken():null}),Je()&&T.connect()}catch(i){r(i instanceof Error?i.message:"Failed to initialize")}finally{n(!1)}}),(()=>{var i=ms();return y(i,p(I,{get when(){return t()},get children(){return p(ht,{})}}),null),y(i,p(I,{get when(){return Z(()=>!t())()&&s()},get children(){return p(bs,{get message(){return s()}})}}),null),y(i,p(I,{get when(){return Z(()=>!t())()&&!s()},get children(){return p(on,{get fallback(){return p(ht,{})},get children(){return e.children}})}}),null),i})()}const $s=[{path:"/",component:ws},{path:"/frame/:id",component:xs},{path:"/settings",component:ys},{path:"/auth",component:ft},{path:"/auth/callback",component:ft},{path:"/sign-in",component:()=>p(De,{href:"/auth"})},{path:"/sign-up",component:()=>p(De,{href:"/auth"})}],Nt=document.getElementById("root");if(!Nt)throw new Error("Root element not found");pn(()=>p(Zn,{root:vs,children:$s}),Nt);
//# sourceMappingURL=index-DgVMBW_J.js.map
